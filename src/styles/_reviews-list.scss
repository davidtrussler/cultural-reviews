.reviews {
  $image-size: 100px;
  $image-size-s: 120px;
  $image-size-m: 140px;
  $image-size-l: 170px;
  $image-size-xl: 200px;

  margin: 1rem 0 0;

  .reviews__list {
  }

  .reviews__listing {
    @include clearfix;

    &:nth-child(2n+1) {
      -ms-grid-column: 1;
    }

    &:nth-child(2n) {
      -ms-grid-column: 2;
    }
  }

  .listing__item {
    display: -ms-grid;
    -ms-grid-columns: $image-size auto;
    display: grid;
    grid-template-columns: $image-size auto;
    column-gap: $gutter;
    text-decoration: none;
  }

  .listing__image {
    -ms-grid-column: 1;
    width: $image-size;
    height: $image-size;
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;

    img {
      aspect-ratio: 1;
    }
  }

  .listing__content {
    -ms-grid-column: 2;
  }

  .content__medium {
    @include medium;
  }

  .content__title {
    @include title;
  }

  .content__extra {
    @include extra;
  }

  // Responsive layout
  // Baseline: 1 column, image/content aligned, image size: default
  @include respond-to($mq-xs) {
    // 2 columns, image/content stacked
    .reviews__listing {
      &:nth-child(2n) {
        -ms-grid-column: 2;
      }

      &:nth-child(2n+1) {
        -ms-grid-column: 1;
      }

      &:nth-child(3),
      &:nth-child(4) {
        -ms-grid-row: 2;
      }
    }

    .reviews__list {
      display: -ms-grid;
      -ms-grid-columns: 1fr 1fr;
      display: grid;
      grid-template-columns: 1fr 1fr;
      column-gap: $gutter;
    }

    .listing__item {
      -ms-grid-columns: none;
      grid-template-columns: none;
    }

    .listing__image {
      -ms-grid-column: 1;
      -ms-grid-row: 1;
    }

    .listing__content {
      -ms-grid-column: 1;
      -ms-grid-row: 2;
    }
  }

  @include respond-to($mq-s) {
    // 2 columns, image/content stacked, image size: s
    .listing__image {
      width: $image-size-s;
      height: $image-size-s;
    }
  }

  @include respond-to($mq-sm) {
    // 2 columns, image/content aligned, image size: s
    .listing__item {
      -ms-grid-columns: $image-size-s auto;
      grid-template-columns: $image-size-s auto;
      column-gap: calc($gutter * 2);
    }

    .listing__content {
      -ms-grid-column: 2;
      -ms-grid-row: 1;
    }
  }

  @include respond-to($mq-m) {
    // 2 columns, image/content aligned, image size: m
    .listing__item {
      -ms-grid-columns: $image-size-m auto;
      grid-template-columns: $image-size-m auto;
    }

    .listing__image {
      width: $image-size-m;
      height: $image-size-m;
    }
  }

  @include respond-to($mq-lm, portrait) {
    // 2 columns, image/content aligned, image size: l
    .listing__item {
      -ms-grid-columns: $image-size-l auto;
      grid-template-columns: $image-size-l auto;
    }

    .listing__image {
      width: $image-size-l;
      height: $image-size-l;
    }
  }

  @include respond-to($mq-lm, landscape) {
    // 4 columns, image/content stacked, image size: l
    .reviews__list {
      -ms-grid-columns: 1fr 1fr 1fr 1fr;
      grid-template-columns: 1fr 1fr 1fr 1fr;
    }

    .reviews__listing {
      &:nth-child(n + 1) {
        -ms-grid-column: 1;
        -ms-grid-row: 1;
      }

      &:nth-child(n + 2) {
        -ms-grid-column: 2;
        -ms-grid-row: 1;
      }

      &:nth-child(n + 3) {
        -ms-grid-column: 3;
        -ms-grid-row: 1;
      }

      &:nth-child(n + 4) {
        -ms-grid-column: 4;
        -ms-grid-row: 1;
      }
    }

    .listing__item {
      -ms-grid-columns: none;
      grid-template-columns: none;
      -ms-grid-rows: 1fr auto 1rem;
      grid-template-rows: 1fr auto 1rem;
    }

    .listing__image {
      width: $image-size-l;
      height: $image-size-l;
    }

    .listing__content {
      -ms-grid-column: 1;
      -ms-grid-row: 2;
    }
  }

  @include respond-to($mq-l, portrait) {
    // 2 columns, image/content aligned, image size: xl
    .reviews__list {
      grid-template-columns: 1fr 1fr;
      -ms-grid-columns: 1fr 1fr;
    }

    .listing__item {
      -ms-grid-columns: $image-size-xl auto;
      grid-template-columns: $image-size-xl auto;
    }

    .listing__image {
      width: $image-size-xl;
      height: $image-size-xl;
      padding-bottom: 0;
    }
  }

  @include respond-to($mq-l, landscape) {
    // 4 columns, image/content overlap, image size: full width
    .listing__content {
      grid-column: 1 / 2;
      grid-row: 2 / 4;
    }

    .listing__image {
      width: $image-size-xl;
      height: $image-size-xl;
    }

    @supports(grid-column: 1 / 2) {
      .content__wrapper {
        display: inline-block;
        padding: 0.5rem calc($gutter * 2);
        margin: 0 calc($gutter * 4);
        background: rgba(224, 224, 224, 0.875);
      }

      .listing__image {
        width: 100%;
        height: 0;
        padding: 0 0 100%;
        grid-column: 1 / 2;
        grid-row: 1 / 3;
      }
    }
  }
}
