.reviews {
  // $image-size: 77px;
  // $image-size-xs: 95px;
  // $image-size-s: 113px;
  // $image-size-sm: 162px;
  // $image-size-m: 182px;
  // $image-size-lm: 207px;
  // $image-size-l: 280px;
  $image-size-aligned: calc((100% - ($gutter * 3)) / 4);
  $image-size-stacked: calc((100% - ($gutter * 2)) / 2);
  $image-size-aligned-2-col: calc((100% - ($gutter * 2)) / 2);

  margin: 1rem 0 0;

  .reviews__list {
  }

  .reviews__listing {
    background: aqua;

    @include clearfix;

    &:nth-child(2n+1) {
      -ms-grid-column: 1;
    }

    &:nth-child(2n) {
      -ms-grid-column: 2;
    }
  }

  .listing__item {
    display: -ms-grid;
    -ms-grid-columns: $image-size-aligned auto;;
    display: grid;
    grid-template-columns: $image-size-aligned auto;

    column-gap: $gutter;
    text-decoration: none;
  }

  .listing__image {
    -ms-grid-column: 1;
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;

    width: 100%;
    height: 0;
    padding: 0 0 100%;
  }

  .listing__content {
    -ms-grid-column: 2;
  }

  .content__medium {
    @include medium;
  }

  .content__title {
    @include title;
  }

  .content__extra {
    @include extra;
  }

  // Responsive layout

  // Baseline: 1 column, image/content aligned, image size: default

  @include respond-to($mq-xs) {
    // 2 columns, image/content stacked
    .reviews__listing {
      background: beige;

      &:nth-child(2n) {
        -ms-grid-column: 2;
      }

      &:nth-child(2n+1) {
        -ms-grid-column: 1;
      }

      &:nth-child(3),
      &:nth-child(4) {
        -ms-grid-row: 2;
      }
    }

    .reviews__list {
      display: -ms-grid;
      -ms-grid-columns: 1fr 1fr;
      display: grid;
      grid-template-columns: 1fr 1fr;
      column-gap: $gutter;
    }

    .listing__item {
      display: inline;
    }

    .listing__image {
      width: $image-size-stacked;
      height: 0;
      padding-bottom: $image-size-stacked;
    }
  }

  @include respond-to($mq-s) {
    // 2 columns, image/content stacked, image size: s
    .reviews__listing {
      background: coral;
    }
  }

  @include respond-to($mq-sm) {
    // 2 columns, image/content aligned, image size: s
    .reviews__listing {
      background: powderblue;
    }

    .listing__item {
      display: -ms-grid;
      -ms-grid-columns: $image-size-aligned-2-col auto;
      display: grid;
      grid-template-columns: $image-size-aligned-2-col auto;
      column-gap: calc($gutter * 2);
    }

    .listing__image {
      width: 100%;
      height: 0;
      padding-bottom: 100%;
    }

    .listing__content {
      -ms-grid-column: 2;
      -ms-grid-row: 1;
    }
  }

  @include respond-to($mq-m) {
    // 2 columns, image/content aligned, image size: m
    .reviews__listing {
      background: peachpuff;
    }
  }

  @include respond-to($mq-lm, portrait) {
    // 2 columns, image/content aligned, image size: l
    .reviews__listing {
      background: khaki;
    }
  }

  @include respond-to($mq-lm, landscape) {
    // 4 columns, image/content stacked, image size: l
    .reviews__list {
      -ms-grid-columns: 1fr 1fr 1fr 1fr;
      grid-template-columns: 1fr 1fr 1fr 1fr;
    }

    .reviews__listing {
      background: skyblue;

      &:nth-child(n + 1) {
        -ms-grid-column: 1;
        -ms-grid-row: 1;
      }

      &:nth-child(n + 2) {
        -ms-grid-column: 2;
        -ms-grid-row: 1;
      }

      &:nth-child(n + 3) {
        -ms-grid-column: 3;
        -ms-grid-row: 1;
      }

      &:nth-child(n + 4) {
        -ms-grid-column: 4;
        -ms-grid-row: 1;
      }
    }

    .listing__item {
      display: inline;
    }
  }

  @include respond-to($mq-l, portrait) {
    // 2 columns, image/content aligned, image size: xl
    .reviews__listing {
      background: rosybrown;      
    }

    .reviews__list {
      grid-template-columns: 1fr 1fr;
      -ms-grid-columns: 1fr 1fr;
    }

    .listing__item {
      -ms-grid-columns: $image-size-aligned-2-col auto;
      grid-template-columns: $image-size-aligned-2-col auto;
    }
  }

  @include respond-to($mq-l, landscape) {
    // 4 columns, image/content overlap, image size: full width
    .reviews__listing {
      background: mintcream;
    }

    .listing__item {
      display: grid;
      grid-template-columns: none;
      grid-template-rows: 1fr auto 1rem;
    }

    .listing__image {
      width: 100%;
      height: auto;
    }

    .listing__content {
      grid-column: 1 / 2;
      grid-row: 2 / 4;
    }

    @supports(grid-column: 1 / 2) {
      .content__wrapper {
        display: inline-block;
        padding: 0.5rem calc($gutter * 2);
        margin: 0 calc($gutter * 4);
        background: rgba(224, 224, 224, 0.875);
      }

      .listing__image {
        width: 100%;
        height: 0;
        padding: 0 0 100%;
        grid-column: 1 / 2;
        grid-row: 1 / 3;
      }
    }
  }
}
